<!DOCTYPE html>
<html>
<head>
  <title>Boats</title>
  <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>
</head>
<body>
</body>
  
<script type="text/javascript">

SVG.Boat= class extends SVG.G {
  constructor(color, x, y, angle) {
    super(x, y);
    var group = this.group()
    var hull = group.path(
	    `M ${x},${y} C ${x + 20},${y + 20} ${x + 20},${y + 60} ${x + 20},${y + 80} ` +
	    `L ${x - 20},${y + 80} C ${x - 20},${y + 60} ${x -20},${y + 20} ${x},${y}`);
    hull.stroke({color: 'black', width: 3, linecap: 'round', linejoin: 'round'});
    hull.fill(color);
    var sail = group.path(`M ${x},${y + 40} L ${x + 30},${y + 50} L ${x + 10},${y + 85} Z`);
    sail.fill({color: 'lightgray', opacity: 0.75});
    sail.stroke({color: 'black', width: 1});
    group.rotate(angle, x, y + 40);
  }
}

SVG.extend(SVG.Container,  {
  boat: function(color, x, y, angle) {
    return this.put(new SVG.Boat(color, x, y, angle))
  }
})

var draw = SVG().addTo('body').size(600, 300);

var boat1 = draw.boat('lightblue', 100, 100, 90);
var boat2 = draw.boat('lightgreen', 200, 120, 110);

var boata = draw.boat('red', 100, 200, 0);
var boatb = draw.boat('red', 200, 200, 45);
var boatc = draw.boat('red', 300, 200, 90);
var boatd = draw.boat('red', 400, 200, 180);

var course1 = draw.path("m 0,200 C 0,0 100,300 300,100");
course1.fill('none').stroke({width:2, color: 'blue'})

var course2 = draw.path("m 0,0 C 50,50 200,200 300,200");
course2.fill('none').stroke({width:2, color: 'green'})

draw.animate(8000, '<>').during(function( eased){
    var p = course1.pointAt(eased * course1.length());
    boat1.center(p.x, p.y);
    var q = course2.pointAt(eased * course2.length());
    boat2.center(q.x, q.y);
}).loop(true)

</script>
</html>
